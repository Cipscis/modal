(()=>{"use strict";class e extends Array{constructor(e){if("string"!=typeof e)throw new RangeError("KeyBind: Constructor argument must be a string");super(0);const t=e.trim().split(/\s+/g);for(const e of t)this.push(e)}toString(){return this.join(" ")}match(e){if(e.length!==this.length)return!1;for(const[t,n]of e.entries()){const e=this[t];if(!n.match(e))return!1}return!0}}const t=Object.freeze({alt:/\balt\+/g,ctrl:/\b(control|ctrl|command|cmd|meta)\+/g,shift:/\bshift\+/g}),n=Object.freeze({space:" ",spacebar:" ",up:"arrowup",right:"arrowright",down:"arrowdown",left:"arrowleft",esc:"escape"});class o{constructor(e){if(!("key"in e))throw new RangeError("KeyPress: key is a required option");this.key=e.key,this.modifiers={altKey:e.altKey||!1,ctrlKey:e.metaKey||e.ctrlKey||!1,shiftKey:e.shiftKey||!1}}match(e){const o={altKey:!1,ctrlKey:!1,shiftKey:!1};t.alt.test(e)&&(o.altKey=!0,e=e.replace(t.alt,"")),t.ctrl.test(e)&&(o.ctrlKey=!0,e=e.replace(t.ctrl,"")),t.shift.test(e)&&(o.shiftKey=!0,e=e.replace(t.shift,""));for(const e in o)if(o[e]&&!this.modifiers[e])return!1;return e.toLowerCase()===this.key.toLowerCase()||n[e.toLowerCase()]===this.key.toLowerCase()}}const r=new Map,s=Object.freeze({allowInInput:!1}),i=(t,n,r)=>{const i=Object.assign({},s,r),l=new e(t),d=[];return function(e){if(["Alt","Control","Meta","Shift"].includes(e.key))return;if(!i.allowInInput&&c(document.activeElement))return;if(a(document.activeElement))return;const t=new o(e);d.push(t),d.length>l.length&&d.shift(),l.match(d)&&(d.splice(0),n.apply(this,arguments))}},c=function(e){const t=e.nodeName.toLowerCase();let n=!1;if(["textarea","select"].includes(t))n=!0;else if("input"===t){n=!0;const t=(e.attributes.type?.value||"text").toLowerCase();["button","checkbox","color","file","hidden","image","radio","range","reset","submit"].includes(t)&&(n=!1)}else e.isContentEditable&&(n=!0);return n},a=function(e){let t=!1;return"input"===e.nodeName.toLowerCase()&&"password"===(e.attributes.type?.value||"text").toLowerCase()&&(t=!0),t},l=function(e){let t;return e.matches("input, select, textarea, button, object")?t=!1===e.disabled:e.matches("a, area")?t=e.matches("[href]"):(e.matches("[tabindex]")||e.matches('[contentEditable="true"]'))&&(t=!0),t&&(t=function(e){let t=!0;const n=window.getComputedStyle(e);if("fixed"!==n.position&&!1===["body","html"].includes(e.tagName.toLowerCase()))null===e.offsetParent&&(t=!1);else{const o=n.visibility;if("none"===n.display)t=!1;else if("hidden"===o)t=!1;else for(const n=e.ancestorElement;n;n=e.ancestorElement)if("none"===window.getComputedStyle(e).display){t=!1;break}}return t}(e)),t},d=function(e){let t=!1;return l(e)&&(t=!e.matches('[tabindex="-1"]')),t},u=Object.freeze({trap:"js-focus-trap"}),f=Object.freeze({trap:`.${u.trap}`});let h;const m=document.createElement("div");m.setAttribute("tabindex",0);const g=document.createElement("div");g.setAttribute("tabindex",0);const y=function(){document.querySelectorAll("*").forEach((e=>e.removeEventListener("focus",p))),h.classList.remove(u.trap),h=null,m.remove(),g.remove()},p=function(e){const t=e.target;if(!t.closest(f.trap)){const e=h.querySelectorAll("*"),n=Array.prototype.filter.call(e,d);h.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING?n[0].focus():n[n.length-1].focus()}},b={modal:".js-modal",body:".js-modal__body",trigger:".js-modal__trigger",close:".js-modal__close"},w=Object.freeze({bodyOpenClass:"data-modal-body-open-class"}),_=Object.freeze({bodyOpen:"modal__body-open"});let v,E;const k={init:function(e){(e=e??{}).onShow&&(k._onShow=e.onShow),e.triggerSelector&&(b.trigger=e.triggerSelector),k._initEvents()},_initEvents:function(){document.addEventListener("click",k._processTriggerClickEvent)},_bindModalActiveEvents:function(){var e;((e,t,n)=>{r.has(e)||r.set(e,new Map);const o=r.get(e);if(o.has(t))return;const s=i(e,t,{allowInInput:!0});document.addEventListener("keydown",s),o.set(t,s)})("esc",k._hide),document.addEventListener("click",k._hideEvent),document.addEventListener("click",k._hideIfBackgroundClickEvent),e=E.querySelector(b.body),h&&y(),h=e,h.classList.add(u.trap),h.parentNode.insertBefore(m,h),h.parentNode.insertBefore(g,h.nextSibling),document.querySelectorAll("*").forEach((e=>e.addEventListener("focus",p)))},_unbindModalActiveEvents:function(){((e,t)=>{const n=r.get("esc");if(!n)return;const o=n.get(t);document.removeEventListener("keydown",o),n.delete(t)})(0,k._hide),document.removeEventListener("click",k._hideEvent),document.removeEventListener("click",k._hideIfBackgroundClickEvent),y()},_processTriggerClickEvent:function(e){const t=e.target.closest(b.trigger);if(t){e.preventDefault();const n=k._getTargetId(t);k._showById(n)}},_getTargetId:function(e){let t=e.getAttribute("href");return t=!0===/^#/.test(t)?t.substring(1):e.getAttribute("aria-controls"),t},_hideIfBackgroundClickEvent:function(e){const t=e.target;t.closest(b.body)||t.closest(b.trigger)||k._hide()},_showById:function(e){const t=document.getElementById(e);t&&k._show(t)},_show:function(e){E?E.setAttribute("aria-hidden",!0):v=document.activeElement,E=e,e.setAttribute("aria-hidden",!1);const t=k._getBodyOpenClass(e);document.querySelector("body").classList.add(t),k._onShow&&k._onShow(e);const n=k._getFocusable();n.length&&n[0].focus(),k._bindModalActiveEvents()},_hideEvent:function(e){e.target.closest(b.close)&&(e.preventDefault(),k._hide())},_hide:function(){if(E){E.setAttribute("aria-hidden",!0);const e=k._getBodyOpenClass(E);document.querySelector("body").classList.remove(e),k._unbindModalActiveEvents(),v&&v.focus(),E=null,v=null}},_getBodyOpenClass:function(e){return e.getAttribute(w.bodyOpenClass)||_.bodyOpen},_getFocusable:function(e){const t=(e=e||E).querySelector(b.body),n=t.querySelectorAll("*"),o=Array.prototype.filter.call(n,l);return l(t)&&o.unshift(t),o},show:function(e){return k._showById(e)},hide:function(){return k._hide()}},{init:L,show:C,hide:S}=k;L({onShow:console.log});const A=Object.freeze({show:".js-example__show",hide:".js-example__hide"}),O=e=>{e.stopPropagation(),C("modal-show-example")};document.querySelectorAll(A.show).forEach((e=>e.addEventListener("click",O))),document.querySelectorAll(A.hide).forEach((e=>e.addEventListener("click",S)))})();
//# sourceMappingURL=bundle.js.map